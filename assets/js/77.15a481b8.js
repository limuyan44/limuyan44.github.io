(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{573:function(s,a,n){"use strict";n.r(a);var t=n(6),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("特殊时期，github访问太慢了，正好腾讯云99一年的活动就买了一年，将博客迁到腾讯云。")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("在阿里云购买的免费的ssl证书，免费一年，真是比之前用的免费版三个月一换方便多了。")])]),s._v(" "),n("li",[n("p",[s._v("安装上node,hexo,git,nginx,部署证书，拉取代码，博客能用了。")])]),s._v(" "),n("li",[n("p",[s._v("为了能够写博客时体验更好，准备使用githubhook,我将博客push之后触发脚本自动拉取代码，hexo g。")])]),s._v(" "),n("li",[n("p",[s._v("使用flask提供接口")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("安装virtualenv")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python-pip\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv\nvirtualenv myvenv\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" myvenv/bin/activate\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("安装Flask")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("pip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" Flask\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("helloworld")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("from flask "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" Flask\napp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Flask"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__name__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n@app.route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndef hello_world"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World!'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n    app.run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.0.0'")]),s._v(",debug"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("True"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#host=0.0.0.0 将服务对外网可用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#debug=True开启调试模式")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("使用github webhook调用flask接口，在flask里面调用shell脚本执行 git pull&&hexo g")])]),s._v(" "),n("li",[n("p",[s._v("异步执行shell")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("from subprocess "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" Popen\np "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Popen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sh hook.sh'")]),s._v(",shell"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("True"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("https突然没法用了未查明原因（是网站没有备案被腾讯拦截了。。）。。。。。。。。")])]),s._v(" "),n("li",[n("p",[s._v("部署，flask的部署实在是太麻烦了啊。。最后我直接 用nohup python hook.py &启动了一个开放模式用着了。")])]),s._v(" "),n("li",[n("p",[s._v("找到原因了，等备案审核通过中。。")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);